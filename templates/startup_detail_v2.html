{% extends 'base.html' %}
{% load static %}

{% block title %}{{ startup.name }} - Details{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-white position-relative py-5"
    style="background: linear-gradient(135deg, #0F172A 0%, #1E3A8A 100%);">
    <div class="container position-relative z-1">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="d-flex align-items-center mb-3">
                    {% if startup.image %}
                    <img src="{{ startup.image.url }}" alt="{{ startup.name }}" class="rounded-3 shadow-sm me-4"
                        style="width: 100px; height: 100px; object-fit: cover;">
                    {% else %}
                    <div class="bg-white bg-opacity-10 rounded-3 d-flex align-items-center justify-content-center me-4"
                        style="width: 100px; height: 100px;">
                        <i class="fas fa-building fa-3x text-white opacity-75"></i>
                    </div>
                    {% endif %}
                    <div>
                        <h1 class="display-4 fw-bold mb-1">{{ startup.name }}</h1>
                        <span class="badge bg-secondary-custom px-3 py-2 rounded-pill shadow-sm">
                            {{ startup.industry|default:"Industry" }}
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-lg-end mt-4 mt-lg-0">
                <div class="d-flex flex-column gap-2">
                    {% if startup.contact_email %}
                    <a href="mailto:{{ startup.contact_email }}" class="btn btn-primary-custom btn-lg shadow-sm">
                        <i class="fas fa-envelope me-2"></i> Contact Founder
                    </a>
                    {% else %}
                    <button class="btn btn-outline-light btn-lg shadow-sm">
                        <i class="fas fa-handshake me-2"></i> Request Introduction
                    </button>
                    {% endif %}

                    <a href="{% url 'toggle_watchlist' startup.pk %}"
                        class="btn {% if is_in_watchlist %}btn-danger{% else %}btn-outline-light{% endif %} btn-lg shadow-sm">
                        {% if is_in_watchlist %}
                        <i class="fas fa-heart-broken me-2"></i> Remove from Watchlist
                        {% else %}
                        <i class="fas fa-heart me-2"></i> Save to Watchlist
                        {% endif %}
                    </a>

                    <a href="{% url 'edit_startup' startup.pk %}" class="btn btn-outline-light btn-lg shadow-sm">
                        <i class="fas fa-edit me-2"></i> Edit Details
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Decorative background element -->
    <div class="position-absolute bottom-0 end-0 opacity-10 pe-none">
        <i class="fas fa-chart-line fa-10x text-white" style="transform: rotate(-15deg) translateY(20%);"></i>
    </div>
</div>

<div class="container py-5" style="margin-top: -3rem;">
    <!-- Key Metrics Grid -->
    <div class="row g-4 mb-5 position-relative z-2">
        <div class="col-md-4">
            <div class="card card-custom h-100 border-0 shadow-lg">
                <div class="card-body p-4 d-flex align-items-center">
                    <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3">
                        <i class="fas fa-user-tie fa-2x text-primary"></i>
                    </div>
                    <div>
                        <h6 class="text-uppercase text-muted small fw-bold mb-1">Founder</h6>
                        <h5 class="fw-bold text-dark mb-0">{{ startup.founder }}</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-custom h-100 border-0 shadow-lg">
                <div class="card-body p-4 d-flex align-items-center">
                    <div class="rounded-circle bg-success bg-opacity-10 p-3 me-3">
                        <i class="fas fa-calendar-alt fa-2x text-success"></i>
                    </div>
                    <div>
                        <h6 class="text-uppercase text-muted small fw-bold mb-1">Founded</h6>
                        <h5 class="fw-bold text-dark mb-0">{{ startup.founded_date|date:"F Y" }}</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-custom h-100 border-0 shadow-lg">
                <div class="card-body p-4 d-flex align-items-center">
                    <div class="rounded-circle bg-info bg-opacity-10 p-3 me-3">
                        <i class="fas fa-clock fa-2x text-info"></i>
                    </div>
                    <div>
                        <h6 class="text-uppercase text-muted small fw-bold mb-1">Joined Platform</h6>
                        <h5 class="fw-bold text-dark mb-0">{{ startup.created_at|date:"M d, Y" }}</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
            <div class="card card-custom shadow-sm mb-4">
                <div class="card-body p-5">
                    <h4 class="fw-bold text-dark mb-4 border-bottom pb-3">About {{ startup.name }}</h4>
                    <p class="lead text-secondary" style="line-height: 1.8;">{{ startup.description }}</p>

                    <!-- Documents Section -->
                    <div class="mt-5">
                        <h5 class="fw-bold mb-3">Documents</h5>
                        <div class="alert alert-light border d-flex align-items-center p-3 rounded-3">
                            <i class="fas fa-file-pdf fa-2x text-danger me-3"></i>
                            <div>
                                <h6 class="fw-bold mb-0">Pitch Deck</h6>
                                <small class="text-muted">Available for verified investors</small>
                            </div>
                            <button class="btn btn-sm btn-outline-primary ms-auto rounded-pill px-3">Request
                                Access</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar / Statistics -->
        <div class="col-lg-4">
            <!-- Investment Highlights -->
            <div class="card card-custom shadow-sm mb-4">
                <div class="card-header bg-white border-bottom py-3">
                    <h5 class="fw-bold m-0 text-success"><i class="fas fa-chart-line me-2"></i>Investment Highlights
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div class="row g-3">
                        <div class="col-6">
                            <div class="p-3 bg-light rounded text-center h-100">
                                <small class="text-muted text-uppercase d-block mb-1" style="font-size: 0.7rem;">Target
                                    Raise</small>
                                <span class="fw-bold text-dark h5">$500k</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-light rounded text-center h-100">
                                <small class="text-muted text-uppercase d-block mb-1" style="font-size: 0.7rem;">Min
                                    Ticket</small>
                                <span class="fw-bold text-dark h5">$10k</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="p-3 bg-light rounded text-center">
                                <small class="text-muted text-uppercase d-block mb-1"
                                    style="font-size: 0.7rem;">Valuation Cap</small>
                                <span class="fw-bold text-dark h4">$5M</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 d-grid">
                        {% if user.is_authenticated %}
                            <a href="{% url 'add_investment' %}?startup={{ startup.id }}" class="btn btn-success btn-lg shadow-sm">Invest Now</a>
                        {% else %}
                            <a href="{% url 'login' %}?next={% url 'add_investment' %}?startup={{ startup.id }}" class="btn btn-success btn-lg shadow-sm">Invest Now</a>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="card card-custom shadow-sm mb-4">
                <div class="card-header bg-white border-bottom py-3">
                    <h5 class="fw-bold m-0 text-primary-custom"><i class="fas fa-address-card me-2"></i>Contact</h5>
                </div>
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <div class="rounded-circle bg-light p-2 me-3">
                            <i class="fas fa-envelope text-primary"></i>
                        </div>
                        <div>
                            <small class="text-muted d-block text-uppercase" style="font-size: 0.7rem;">Email</small>
                            {% if startup.contact_email %}
                            <a href="mailto:{{ startup.contact_email }}"
                                class="text-dark text-decoration-none fw-bold">{{ startup.contact_email }}</a>
                            {% else %}
                            <span class="text-muted">Not Provided</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle bg-light p-2 me-3">
                            <i class="fas fa-globe text-primary"></i>
                        </div>
                        <div>
                            <small class="text-muted d-block text-uppercase" style="font-size: 0.7rem;">Website</small>
                            {% if startup.website %}
                            <a href="{{ startup.website }}" target="_blank"
                                class="text-dark text-decoration-none fw-bold">Visit Website <i
                                    class="fas fa-external-link-alt small ms-1"></i></a>
                            {% else %}
                            <span class="text-muted">Not Provided</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Share / Actions -->
            <div class="card card-custom shadow-sm">
                <div class="card-body text-center p-4">
                    <p class="text-muted small mb-3">Share this startup</p>
                    <div class="d-flex justify-content-center gap-2">
                        <button class="btn btn-outline-secondary rounded-circle share-btn" data-platform="linkedin" style="width: 40px; height: 40px;" title="Share on LinkedIn"><i
                                class="fab fa-linkedin-in"></i></button>
                        <button class="btn btn-outline-secondary rounded-circle share-btn" data-platform="twitter" style="width: 40px; height: 40px;" title="Share on Twitter"><i
                                class="fab fa-twitter"></i></button>
                        <button class="btn btn-outline-secondary rounded-circle share-btn" data-platform="copy" style="width: 40px; height: 40px;" title="Copy Link"><i
                                class="fas fa-link"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const shareButtons = document.querySelectorAll('.share-btn');
    const currentUrl = window.location.href;
    const startupName = '{{ startup.name|escapejs }}';
    const shareText = `Check out ${startupName} on InvestTrack!`;
    
    shareButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const platform = this.getAttribute('data-platform');
            
            if (platform === 'linkedin') {
                window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(currentUrl)}`, '_blank', 'width=600,height=400');
            } else if (platform === 'twitter') {
                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(currentUrl)}`, '_blank', 'width=600,height=400');
            } else if (platform === 'copy') {
                navigator.clipboard.writeText(currentUrl).then(() => {
                    const icon = this.querySelector('i');
                    icon.className = 'fas fa-check';
                    this.classList.add('btn-success');
                    this.classList.remove('btn-outline-secondary');
                    setTimeout(() => {
                        icon.className = 'fas fa-link';
                        this.classList.remove('btn-success');
                        this.classList.add('btn-outline-secondary');
                    }, 2000);
                });
            }
        });
    });
});
</script>

{% endblock %}